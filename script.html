<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 23 January 2014 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="The MyBatis Team" />
    <meta name="Date-Revision-yyyymmdd" content="20140123" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MyBatis Migrations - 
    MyBatis Migrations | Migrate > script</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MyBatis Migrations</h2>
                </div>
                      </div>
        <div class="pull-right">                                <a href="../" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="http://mybatis.github.io/images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 23 January 2014
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.2.1-SNAPSHOT
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Migrations</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                                                                                                                                                                                                                      
      <li>
  
                          <a href="migrate.html" title="The 'migrate' Command">
          <i class="icon-chevron-down"></i>
        The 'migrate' Command</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="init.html" title="init">
          <i class="none"></i>
        init</a>
            </li>
                    
      <li>
  
                          <a href="bootstrap.html" title="bootstrap">
          <i class="none"></i>
        bootstrap</a>
            </li>
                    
      <li>
  
                          <a href="new.html" title="new">
          <i class="none"></i>
        new</a>
            </li>
                    
      <li>
  
                          <a href="status.html" title="status">
          <i class="none"></i>
        status</a>
            </li>
                    
      <li>
  
                          <a href="updown.html" title="up, down">
          <i class="none"></i>
        up, down</a>
            </li>
                    
      <li>
  
                          <a href="version.html" title="version">
          <i class="none"></i>
        version</a>
            </li>
                    
      <li>
  
                          <a href="pending.html" title="pending">
          <i class="none"></i>
        pending</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>script</a>
          </li>
                    
      <li>
  
                          <a href="shortcuts.html" title="Command Shortcuts">
          <i class="none"></i>
        Command Shortcuts</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="runtime-migration.html" title="Runtime Schema Migration">
          <i class="none"></i>
        Runtime Schema Migration</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2011 The myBatis Team

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id: script.xml 4134 2011-11-27 21:13:20Z simone.tripodi $ -->

  
    <div class="section">
<h2>The 'script' command<a name="The_script_command"></a></h2>
      
<p>While we developers wish we had unlimited access to every environment, the unfortunate truth is that we don&#x2019;t.
      Often it&#x2019;s the very production environment that we&#x2019;re targeting that we don&#x2019;t have access to. Someone else, a DBA
      or Change Management team will need to apply any changes. However, we don&#x2019;t want this to be an excuse to not use a
      good, automated change management tool.</p>

      
<p>MyBatis Migrations provides the <b>script</b> command to generate a script that can migrate a schema from one
      version to another. As mentioned above, this will likely always be in an upward direction, but the script command
      does also support generating undo scripts (just in case you&#x2019;re so unfortunate that you don&#x2019;t even have access to
      central development databases!).</p>

      
<p>The script command is quite simple. It takes two version numbers as parameters. Think of it as generating a
      script to apply all of the identified versions in the order specified (the lower version is exclusive and the
      higher version is inclusive).
      For example, given the following:</p>

      
<div class="source">
<pre>/home/cbegin/testdb$ migrate status
ID             Applied At          Description
==================================================================
20090802210445 2009-08-04 22:51:17 create changelog
20090804225207 2009-08-04 22:51:17 create author table
20090804225328 2009-08-05 24:55:23 create blog table
20090804225333 2009-08-04 22:51:17 create post table</pre></div>

      
<p>If we need to generate a &#x201c;do&#x201d; script to apply the last two versions above, we&#x2019;d run the following command:</p>

      
<div class="source">
<pre>/home/cbegin/testdb$ migrate script 20090804225207 20090804225333 &gt; do.sql</pre></div>

      
<p>The script command outputs to stdout, so you can let it print to the console, or pipe it to a file or command.</p>

      
<p>To generate the corresponding &#x201c;undo&#x201d; script, simply specify the version numbers in the opposite order:</p>

      
<div class="source">
<pre>/home/cbegin/testdb$ migrate script 20090804225333 20090804225207 &gt; undo.sql</pre></div>

      
<p>To generate a script which includes the first version, specify '0' as the lower version:</p>

      
<div class="source">
<pre>/home/cbegin/testdb$ migrate script 0 20090804225207 &gt; do.sql</pre></div>

      
<div class="source">
<pre>/home/cbegin/testdb$ migrate script 20090804225207 0 &gt; undo.sql</pre></div>

    </div>
  


                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2010&#x2013;2014
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
